<div class="reset-password">
  <mat-card class="reset-password__card">
    <div class="reset-password__logo">
      <img
        src="assets/img/logo.svg"
        alt="Logo"
        class="reset-password__logo-image"
      />
    </div>
    <div class="reset-password__divider"></div>
    
    <div class="reset-password__content">
      <form class="reset-password__form" [formGroup]="passwordForm">
        <h2
          *ngIf="!isRequestCompleted"
          class="reset-password__heading"
        >
          Enter New Password
        </h2>

        <h2
          *ngIf="isRequestCompleted"
          class="reset-password__heading"
        >
          Password Change Successful
        </h2>

        <div
          *ngIf="!isRequestCompleted"
          class="reset-password__fields"
        >
          <mat-form-field
            class="reset-password__field"
            appearance="outline"
          >
            <mat-label>New Password</mat-label>
            <input
              matInput
              type="password"
              placeholder="New Password"
              formControlName="password"
              class="reset-password__input"
            />
            <mat-icon
              matTooltip="Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, and one number"
              class="reset-password__help-icon"
            >
              help
            </mat-icon>
            <mat-error class="reset-password__error">
              Password must be at least 8 characters long and contain at least one uppercase letter, one lowercase letter, and one number
            </mat-error>
          </mat-form-field>

          <mat-form-field
            class="reset-password__field"
            appearance="outline"
          >
            <mat-label>Confirm New Password</mat-label>
            <input
              matInput
              type="password"
              placeholder="Confirm New Password"
              formControlName="confirmPassword"
              class="reset-password__input"
            />
            <mat-error
              *ngIf="passwordForm.get('confirmPassword')?.hasError('required')"
              class="reset-password__error"
            >
              Please confirm your password
            </mat-error>
            <mat-error
              *ngIf="passwordForm.get('confirmPassword')?.hasError('passwordMismatch')"
              class="reset-password__error"
            >
              Passwords do not match
            </mat-error>
          </mat-form-field>

          <div class="reset-password__actions">
            <button
              mat-raised-button
              color="primary"
              [disabled]="allowPassword"
              class="reset-password__button"
              type="submit"
              (click)="resetPassword()"
            >
              Confirm
            </button>
          </div>
        </div>

        <div
          *ngIf="isRequestCompleted"
          class="reset-password__success"
        >
          <mat-icon class="reset-password__success-icon">check_circle</mat-icon>
          <p class="reset-password__success-text">
            Your password has been successfully reset. You can now log in with your new password.
          </p>
        </div>
      </form>
    </div>
  </mat-card>
</div>


